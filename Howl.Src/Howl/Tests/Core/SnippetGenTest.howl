âŠ System.IO;
âŠ UnityEngine;
âŠ NUnit.Framework;
âŠ Active.Howl;

âŠ“ Unit{
â€’ â—‹ SnippetGenTest : TestBase{

    Rep UsingRule = ("â™˜", "using static");

    á´¸ ã„¹ AutoSnippetsPath
             = "Assets/Howl/Extras/howl-snippets-auto.cson";

    ØŸ Create(){
        âˆ™ ã„¸ = SnippetGen.Create();
        o( ã„¸[0].name, "Using static");
        o( ã„¸[0].prefix, "usings");
        o( ã„¸[0].body, "âŠÌ¥ ");
        o( ã„¸â™ > 100);
    }

    ØŸ Create_WithExclusions(){
        âˆ™ map = Map.@default;
        map.Rule("that").sel = âœ—;
        âˆ™ ã„¸ = SnippetGen.Create();
        âˆ€(âˆ™ k âˆˆ ã„¸)
            o(k.prefix.âˆ‹("that"), âœ—);
    }

    ØŸ Name()
    â†’ o( SnippetGen.Name(UsingRule), "Using static" );

    ØŸ Prefix()
    â†’ o( SnippetGen.Prefix(UsingRule), "usings" );

    ØŸ Body_()
    â†’ o( SnippetGen.Body(UsingRule), "â™˜ " );

    // TODO broken test
    /*
    [Test] public void TranslateSnippets(){
        string ã…‚ = "Assets/Howl/Extras/cs-snippets.cson";
        string ã„¸ = "Assets/Howl/Extras/howl-snippets.cson";
        SnippetGen.Export(ã…‚, ã„¸);
        string[] Î› = ã„¸.ReadLines();
        o( Î›[ 3], "    'body': 'á´¬ '" );
        // NOTE: after translating each '\n' becomes '\\n';
        // apparently harmless.
        o( Î›[27], "    'body': 'â—‹$1\\n{\\n\\t$0\\n}'" );
    }*/

    ØŸ Prefix_Explicit(){
        âˆ™ Ï = ("(É”Ë˜Ğ·Ë˜)É”", "catch", name: "Got U", px: "got");
        o( SnippetGen.Prefix(Ï), "got");
    }

    ØŸ Prefix_AutoFromName1(){
        âˆ™ Ï = âŒ¢ Rep("â˜°", "==", bridge: âœ“, name: "Eq");
        o( SnippetGen.Prefix(Ï), "eq");
    }

    ØŸ Prefix_AutoFromName2(){
        âˆ™ Ï = âŒ¢ Rep("â†’", "=>", bridge: âœ“, name: "As (=>)");
        o( SnippetGen.Prefix(Ï), "as");
    }

    ØŸ Body_Explicit(){
        âˆ™ Ï = ("ğ‘", "Action") * Body.B("ğ‘<${0:T}>");
        o( SnippetGen.Body(-Ï), "ğ‘<${0:T}>");
    }

    ØŸ Body_SpacingControl(){
        âˆ™ Ï = âŒ¢ Rep("â¤´", "if");
        o( SnippetGen.Body(Ï), "â¤´ ");
        o( SnippetGen.Body(-Ï), "â¤´");
    }

    ØŸ ToPrefix(){
        o( SnippetGen.ToPrefix("  using"), "using");
        o( SnippetGen.ToPrefix("using"), "using");
        o( SnippetGen.ToPrefix("using static"), "usings");
        o( SnippetGen.ToPrefix(" \nusing static"), "usings");
    }

}}
