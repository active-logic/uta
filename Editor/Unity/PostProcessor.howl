âŠ UnityEditor; âŠ UnityEngine;

âŠ“ Active.Howl{
â€’ â—‹ PostProcessor : AssetPostprocessor{

    âˆ˜ á†ž nextId = 0;
    âˆ˜ á†ž Ï†;
    â€’Ì¥ ã…‡ verbose = âœ—, warn = âœ“;
    //
    á†ž id;

    â€’  PostProcessor() â†’ id = nextId++;

    â”ˆ OnPreprocessAsset(){
        Ï† = Time.frameCount;
        âˆ™ Ï€ = assetPath;
        â¤´ (Ï€.IsCSharpSource()){
            CheckEdit(Ï€); â® ;
        } â¤³ (Ï€.IsPackaged() âˆ¨ !Ï€.EndsWith(".howl")) â®;
        â¤´ (Config.Î¹.allowExport){
            ðŸš $"Export {Ï€.FileName()} via #{id} (Ï†.{Ï†})";
            Howl.NitPick(Ï€);
            Howl.BuildFile(Ï€);
            AssetDatabase.ImportAsset(Ï€);
        }
        â¤³ (!Config.Î¹.allowExport ) ðŸš $"Cannot convert {Ï€}\n"
                   + "Please enable export in the Howl Window";
        â¤µ
            ðŸ¤ $"Cannot convert {Ï€} while Unity is importing assets";
    }

    â”ˆ CheckEdit(ã„¹ ã„¸){
        â¤´ (!ã„¸.In(Path.buildRoot)) â® ;
        âˆ™ ã…‚ = ã„¸.SourcePath();
        â¤´ (!ã…‚.Exists()){
            ðŸš $"Edited {ã„¸}";
            ðŸš $"SourcePath exists: {ã…‚} ";
            â¤´ (ã…‚.DirName().IsDir())
                ðŸ¦ž "(Â°ã…‚Â°â•¬) â†¯ creating C# scripts on the Howl path "
                                                       + "is unsafe";
            â¤µ  ðŸ¤ "Edited C# file without counterpart: {Ï€}";
            â® ;
        } â¤³ (ã„¸.DateModified() > ã…‚.DateModified()){
            ðŸ¦ž $"(â€¡â–¼ç›Šâ–¼) â†¯ changes to {ã„¸.FileName()} will be "
                     + "overwritten when you @%#!~ the *.howl source";
        } â¤³ (ã„¸.DateModified() < ã…‚.DateModified()){
            âˆ™ Î´ = ã…‚.DateModified() - ã…‚.DateModified();
            ðŸ¤ $"Reimporting {ã„¸.FileName()}, older than its *.howl "
                                                      + "counterpart";
        }
    }

}}
