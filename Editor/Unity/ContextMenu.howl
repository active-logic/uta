âŠ System.Collections.Generic; âŠ System;
âŠ UnityEditor; âŠ UnityEngine; âŠ ADB = UnityEditor.AssetDatabase;
âŠ S = Active.Howl.UIStrings;

// TODO honor allowExport, allowImport
âŠ“ Active.Howl{ â€’ â—‹ ContextMenu{

    [MenuItem(S.ApplySymset, âœ—, 0)] âˆ˜ â”ˆ ApplySymset
    âš Do(Howl.ReimportFile, "Updating", Path._Howl);

    [MenuItem(S.UseHowl, âœ—, 0)] âˆ˜ â”ˆ UseHowl
    âš Do(Howl.ImportFile, "Importing", Path._Cs, Path._Asmdef);

    [MenuItem(S.UseCSharp, âœ—, 0)] âˆ˜ â”ˆ UseCs(){
        Do(Howl.ExportFile, "Exporting", Path._Howl, Path._Asmdt);
        Path.buildRoot.Clean();
    }

    // Validators ---------------------------------------------------

    [MenuItem(S.ApplySymset, âœ“), MenuItem(S.UseCSharp, âœ“)]
    âˆ˜ ã…‡ IsHowlFileAction âš ValidateSel(Path._Howl);

    [MenuItem(S.UseHowl, âœ“)]
    âˆ˜ ã…‡ IsCsFileAction âš ValidateSel(Path._Cs, Path._Asmdef);

    // --------------------------------------------------------------

    âˆ˜ â”ˆ Do(â’œ<ã„¹> Î±, ã„¹ verb, params ã„¹[] types){
        âˆ™ Î› = Sel(types); á† N = Î›â;
        â¤´ (N â˜° 0) ğŸ° $"No input";
        â¤³ (N â˜° 1) ğŸ° $"{verb} {Î›[0].FileName()}";
        â¤µ         ğŸ° $"{verb} {N} files";
        Î›.ForEach(Î±);
        AssetDatabase.Refresh();
    }

    âˆ˜ ã…‡ ValidateSel(â‹¯ ã„¹[] ext){
        âˆ™ Î› = Sel(ext);  â¤´ (Î›â â˜° 0)             â® âœ—;
        âˆ€ (âˆ™ x âˆˆ Î›)      â¤´ (x.âˆ‹(Path.buildRoot)) â® âœ—;
        â® âœ“;
    }

    âˆ˜ ğ•ƒ<ã„¹> Sel(params ã„¹[] types)
    â†’ Selection.assetGUIDs.GUIDsToPaths(types);

}}
