⊐ NUnit.Framework;
⊐ Active.Howl;

⊓ Unit{
‒ ○ CLI_Test : TestBase{

CLI ι;

⍜ Setup ⎚ ι = ⌢ CLI(dry: ✓);

؟ Main ⎚ CLI.Main(⌢ ㄹ[]{});

؟ Build ⎚ o(ι.Build(∅, "src"),
@"Source dir not found: src/
dotnet new console --name build --force
dotnet build build
");

؟ Publish ⎚ o(ι.Publish(∅, "src"),
@"Source dir not found: src/
dotnet new console --name build --force
dotnet publish build --runtime osx-x64
");

    // Fails in .net because of path differences
    #if UNITY_EDITOR

    ؟ Export ⎚ ι.Export(∅, "Assets/Howl/Editor/Ng", "Sandbox/CLI");

    ؟ Run(){
        ∙ target = "Sandbox/HelloWorld";
        ∙ build  = $"{target}/build";
        ∙ hocus  = $"{build}/build.csproj";
        ∙ pocus  = $"{build}/program.cs";
        ι.Run(∅, target);
        o( hocus.Exists(), ✓ );
        o( pocus.Exists(), ✗ );
    }

    #endif

}}
